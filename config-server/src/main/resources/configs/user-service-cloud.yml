# User Service - Cloud Configuration
server:
  port: ${PORT:8082}

spring:
  application:
    name: user-service

# Firebase Configuration (using environment variables)
firebase:
  credentials:
    type: ${FIREBASE_TYPE:service_account}
    project_id: ${FIREBASE_PROJECT_ID:}
    private_key_id: ${FIREBASE_PRIVATE_KEY_ID:}
    private_key: ${FIREBASE_PRIVATE_KEY:}
    client_email: ${FIREBASE_CLIENT_EMAIL:}
    client_id: ${FIREBASE_CLIENT_ID:}
    auth_uri: "https://accounts.google.com/o/oauth2/auth"
    token_uri: "https://oauth2.googleapis.com/token"
    auth_provider_x509_cert_url: "https://www.googleapis.com/oauth2/v1/certs"
    client_x509_cert_url: ${FIREBASE_CLIENT_CERT_URL:}
  database:
    url: ${FIREBASE_DATABASE_URL:}

# Resilience4j Configuration
resilience4j:
  circuitbreaker:
    instances:
      userService:
        registerHealthIndicator: true
        slidingWindowSize: 10
        minimumNumberOfCalls: 5
        permittedNumberOfCallsInHalfOpenState: 3
        automaticTransitionFromOpenToHalfOpenEnabled: true
        waitDurationInOpenState: 5s
        failureRateThreshold: 50
  retry:
    instances:
      userService:
        maxAttempts: 3
        waitDuration: 1s
